<div class="container my-5">
  <h1 class="mb-4 text-success">
    <i class="fas fa-comments"></i> コメント管理
  </h1>

  <% if @comments.any? %>
    <table class="table table-hover shadow-sm bg-white">
      <thead class="thead-light">
        <tr>
          <th>投稿者</th>
          <th>コメント内容</th>
          <th>対象投稿</th>
          <th>投稿日</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        <% @comments.each do |comment| %>
          <tr>
            <td>
              <% if comment.user.present? && !comment.user.is_deleted %>
                <%= link_to comment.user.username, admin_user_path(comment.user), class: "text-success" %>
              <% else %>
                <span class="text-muted">退会済み</span>
              <% end %>
            </td>
            <td><%= truncate(comment.content, length: 50) %></td>
            <td><%= link_to comment.dinner.title, dinner_path(comment.dinner), class: "text-primary" %></td>
            <td><%= l(comment.created_at, format: :short) %></td>
            <td>
              <%= link_to admin_comment_path(comment), method: :delete, data: { confirm: '削除してもよろしいですか？' }, class: "btn btn-sm btn-outline-danger" do %>
                <i class="fas fa-trash"></i> 削除
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p class="text-muted">コメントはまだありません。</p>
  <% end %>
</div>
